// packages/llm-adapters/IMPORT_FIXES.md

# ğŸ”§ Import Issues - Migration Guide

## âŒ **Issues Found & Fixes**

### 1. **BaseAdapter vs BaseLLMAdapter Inconsistency**

**Problem:**
```typescript
// Some files use:
import { BaseAdapter } from '../base/adapter';  // âŒ Error: no export named 'BaseAdapter'

// Other files use:
import { BaseLLMAdapter } from '@/base/adapter';  // âœ… Works but inconsistent path
```

**âœ… Solution:**
Updated `base/adapter.ts` to export both names for compatibility:
```typescript
export abstract class BaseAdapter { /* ... */ }
export class BaseLLMAdapter extends BaseAdapter {} // Alias for compatibility
```

### 2. **Import Path Inconsistencies**

**Problem:**
```typescript
// Mix of paths in different files:
import { BaseLLMAdapter } from '@/base/adapter';           // âŒ Absolute path
import { BaseAdapter } from '../base/adapter';             // âœ… Relative path
import { createStreamingParser } from '@/streaming/parser'; // âŒ Wrong path
```

**âœ… Solution - Standardize to Relative Paths:**
```typescript
// âœ… All providers should use:
import { BaseAdapter } from '../base/adapter';
import { createRetryWrapper } from '../utils/retry';
import { RateLimiter } from '../utils/rateLimiter';
import { CostTracker } from '../utils/costTracker';
import { createStreamingParser } from '../utils/parser';
```

### 3. **Unused Imports**

**Problem:**
```typescript
// âŒ Unused imports causing TypeScript errors:
import MessageRole from '...';        // Never used
import { createStreamingParser };     // Declared but never used
```

**âœ… Solution - Remove Unused Imports:**
```typescript
// âŒ Remove these unused imports:
// import MessageRole from '...';
// import { createStreamingParser } from '...';

// âœ… Only import what you actually use
```

## ğŸ”„ **Migration Steps for Each Provider**

### **Step 1: Fix Base Adapter Import**
```typescript
// âŒ Change from:
import { BaseLLMAdapter } from '@/base/adapter';

// âœ… Change to:
import { BaseAdapter } from '../base/adapter';
```

### **Step 2: Fix Utility Imports**
```typescript
// âŒ Change from:
import { createStreamingParser } from '@/streaming/parser';

// âœ… Change to:
import { createStreamingParser } from '../utils/parser';
```

### **Step 3: Remove Unused Imports**
```typescript
// âŒ Remove these lines completely:
// import MessageRole from '...';
// import { createStreamingParser } from '...' (if not used);
```

### **Step 4: Update Class Declaration**
```typescript
// âœ… Keep consistent:
export class ProviderNameAdapter extends BaseAdapter {
  // Implementation...
}
```

## ğŸ“ **Files That Need Updates**

### **Files Using Wrong BaseAdapter Import:**
- `providers/llamacpp.ts`
- `providers/deepseek.ts`
- `providers/mistral.ts`
- `providers/qwen.ts`
- `providers/huggingface.ts`

### **Files Using @/ Absolute Paths:**
- `providers/openai.ts`
- `providers/anthropic.ts`
- `providers/google.ts`

### **Files with Unused Imports:**
- `providers/ollama.ts` (MessageRole)
- `providers/openai.ts` (createStreamingParser if unused)

## ğŸ› ï¸ **Quick Fix Template**

For each provider file, update the imports section:

```typescript
// packages/llm-adapters/src/providers/[PROVIDER].ts

import {
  AIProvider,
  ChatMessage,
  ChatResponse,
  StreamingChatResponse,
  ModelInfo,
  AIProviderConfig,
  TokenUsage,
  ProviderError,
  ProviderErrorType
} from '@omnipanel/types';
import { BaseAdapter } from '../base/adapter';
import { createRetryWrapper } from '../utils/retry';
import { RateLimiter } from '../utils/rateLimiter';
import { CostTracker } from '../utils/costTracker';
// Only import parser if actually used:
// import { createStreamingParser } from '../utils/parser';

export interface [Provider]Config extends AIProviderConfig {
  // Config interface
}

export class [Provider]Adapter extends BaseAdapter {
  // Implementation
}
```

## âœ… **Verification Checklist**

After making changes, ensure:

- [ ] No TypeScript errors for missing exports
- [ ] No unused import warnings
- [ ] All relative paths (`../`) instead of absolute (`@/`)
- [ ] BaseAdapter (not BaseLLMAdapter) is used consistently
- [ ] Provider classes extend BaseAdapter correctly

## ğŸ¯ **Expected Results**

After applying these fixes:
- âœ… All TypeScript errors resolved
- âœ… Consistent import paths across all providers
- âœ… No unused import warnings
- âœ… Both BaseAdapter and BaseLLMAdapter work (compatibility)
- âœ… Clean, maintainable codebase

## ğŸ“‹ **Files Modified Summary**

1. **`base/adapter.ts`** - âœ… Created with both BaseAdapter and BaseLLMAdapter exports
2. **`utils/parser.ts`** - âœ… Added createStreamingParser export